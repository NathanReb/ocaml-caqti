<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Caqti_type (caqti.Caqti_type)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">caqti</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Caqti_type</span></h1></header><p>Type descriptors for fields and tuples.</p><h3>Primitive Field Types</h3><p>The following is normally only needed for drivers and to define new field
types. Everything needed for common usage is covered in <a href="index.html#row_types">Row Types</a>.</p><div class="spec type" id="type-field"><a href="#type-field" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a field</code><code></code><code><span class="keyword"> = </span></code><code><span class="keyword">..</span></code><code></code></div><div class="doc"><p>An extensible type describing primitive SQL types and types which can be
converted to and from such types. When adding a new constructor, register
the coding with <a href="Field/index.html#val-define_coding">Field.define_coding</a> if possible. Otherwise, the type
will only work with drivers which handle it themselves. The shipped drivers
only handle the constructors listed here.</p></div></div><div class="spec extension"><div class="def extension"><code><span class="keyword">type </span><a href="index.html#type-field">field</a><span class="keyword"> += </span></code><code><span class="extension">Bool</span> <span class="keyword">:</span> bool <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Int</span> <span class="keyword">:</span> int <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Int32</span> <span class="keyword">:</span> int32 <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Int64</span> <span class="keyword">:</span> int64 <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Float</span> <span class="keyword">:</span> float <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">String</span> <span class="keyword">:</span> string <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Octets</span> <span class="keyword">:</span> string <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Pdate</span> <span class="keyword">:</span> Ptime.t <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Ptime</span> <span class="keyword">:</span> Ptime.t <a href="index.html#type-field">field</a></code><code><span class="keyword"> | </span></code><code><span class="extension">Ptime_span</span> <span class="keyword">:</span> Ptime.span <a href="index.html#type-field">field</a></code></div><div class="doc"><p>Primitive field types handled by the shipped drivers.</p></div></div><div class="spec module" id="module-Field"><a href="#module-Field" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Field/index.html">Field</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Facilities for extending and using primitive field types.</p></div></div><h3 id="row_types" class="anchored"><a href="#row_types" class="anchor"></a>Row Types</h3><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>_ t</code><code></code><code><span class="keyword"> = </span><span class="keyword">private </span></code><table class="variant"><tr id="type-t.Unit" class="anchored"><td class="def constructor"><a href="#type-t.Unit" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Unit</span> <span class="keyword">:</span> unit <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Field" class="anchored"><td class="def constructor"><a href="#type-t.Field" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Field</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-field">field</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Option" class="anchored"><td class="def constructor"><a href="#type-t.Option" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Option</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Tup2" class="anchored"><td class="def constructor"><a href="#type-t.Tup2" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Tup2</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Tup3" class="anchored"><td class="def constructor"><a href="#type-t.Tup3" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Tup3</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'b</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'c</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span><span class="keyword"> * </span><span class="type-var">'c</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Tup4" class="anchored"><td class="def constructor"><a href="#type-t.Tup4" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Tup4</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'b</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'c</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'d</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span><span class="keyword"> * </span><span class="type-var">'c</span><span class="keyword"> * </span><span class="type-var">'d</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Custom" class="anchored"><td class="def constructor"><a href="#type-t.Custom" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Custom</span><span class="keyword"> : </span></code><code>{</code><table class="record"><tr id="type-t.rep" class="anchored"><td class="def field"><a href="#type-t.rep" class="anchor"></a><code>rep : <span class="type-var">'b</span> <a href="index.html#type-t">t</a>;</code></td></tr><tr id="type-t.encode" class="anchored"><td class="def field"><a href="#type-t.encode" class="anchor"></a><code>encode : <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, string) Stdlib.result;</code></td></tr><tr id="type-t.decode" class="anchored"><td class="def field"><a href="#type-t.decode" class="anchor"></a><code>decode : <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, string) Stdlib.result;</code></td></tr></table><code>}</code><code> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></td></tr></table><code></code></div><div class="doc"><p>Type descriptor for row types.</p><p><b>Note.</b> The concrete representation of this type should be considered
private, including pattern-matching usage; use the below functions for
compatibility with future versions.</p></div></div><div class="spec type" id="type-any"><a href="#type-any" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>any</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-any.Any" class="anchored"><td class="def constructor"><a href="#type-any.Any" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Any</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-any">any</a></code></td></tr></table><code></code></div><div class="doc"><p><a href="index.html#type-t">t</a> with existentially wrapped static type.</p></div></div><div class="spec val" id="val-length"><a href="#val-length" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>length : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code class="code">length t</code> is the number of fields used to represent <code class="code">t</code>.</p></div></div><div class="spec val" id="val-pp"><a href="#val-pp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp : Stdlib.Format.formatter <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">pp ppf t</code> prints a human presentation of <code class="code">t</code> on <code class="code">ppf</code>.</p></div></div><div class="spec val" id="val-pp_any"><a href="#val-pp_any" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_any : Stdlib.Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-any">any</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">pp_any ppf t</code> prints a human presentation of <code class="code">t</code> on <code class="code">ppf</code>.</p></div></div><div class="spec val" id="val-show"><a href="#val-show" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>show : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">show t</code> is a human presentation of <code class="code">t</code>.</p></div></div><div class="spec val" id="val-field"><a href="#val-field" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>field : <span class="type-var">'a</span> <a href="index.html#type-field">field</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">field ft</code> is a row of a single field of type <code class="code">ft</code>. This function can be
used when adding new field types; use the below functions otherwise.</p></div></div><div class="spec module" id="module-Std"><a href="#module-Std" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Std/index.html">Std</a> : <a href="../Caqti_type_sig/index.html#module-type-Std">Caqti_type_sig.Std</a><span class="keyword"> with </span><span class="keyword">type </span>'a <a href="../Caqti_type_sig/module-type-Std/index.html#type-t">t</a> := <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Standard type descriptors provided as a submodule for easy inclusion.</p></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Caqti_type_sig/index.html#module-type-Std">Caqti_type_sig.Std</a><span class="keyword"> with </span><span class="keyword">type </span>'a <a href="../Caqti_type_sig/module-type-Std/index.html#type-t">t</a> := <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></span></summary><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a t</code><code></code><code></code></div><div class="doc"></div></div><h4>Composite</h4><p>The following provides constructors for narrow tuple types; to describe
wider tuple types, use nested application.</p><div class="spec val" id="val-option"><a href="#val-option" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>option : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-unit"><a href="#val-unit" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>unit : unit <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A holding no fields. This is used to pass no parameters and as the result
for queries which does not return any rows. It can also be nested in
tuples, in which case it will not contribute to the total number of
fields.</p></div></div><div class="spec val" id="val-tup2"><a href="#val-tup2" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tup2 : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Creates a pair type.</p></div></div><div class="spec val" id="val-tup3"><a href="#val-tup3" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tup3 : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'c</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span><span class="keyword"> * </span><span class="type-var">'c</span>) <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Creates a 3-tuple type.</p></div></div><div class="spec val" id="val-tup4"><a href="#val-tup4" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tup4 : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'c</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'d</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span><span class="keyword"> * </span><span class="type-var">'c</span><span class="keyword"> * </span><span class="type-var">'d</span>) <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Creates a 4-tuple type.</p></div></div><div class="spec val" id="val-custom"><a href="#val-custom" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>custom : encode:(<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, string) Stdlib.result) <span class="keyword">&#8209;&gt;</span> decode:(<span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, string) Stdlib.result) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">custom ~encode ~decode rep</code> creates a custom type represented by <code class="code">rep</code>,
where <code class="code">encode</code> is used to encode parameters into <code class="code">rep</code> and <code class="code">decode</code> is
used to decode result rows from <code class="code">rep</code>.</p><p><b>Note.</b> This should be considered experimental and may be revised or
removed in a future version.</p></div></div><h4>Singular</h4><div class="spec val" id="val-bool"><a href="#val-bool" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>bool : bool <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A boolean.</p></div></div><div class="spec val" id="val-int"><a href="#val-int" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>int : int <a href="index.html#type-t">t</a></code></div><div class="doc"><p>An integer.</p></div></div><div class="spec val" id="val-int32"><a href="#val-int32" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>int32 : int32 <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A 32 bit integer.</p></div></div><div class="spec val" id="val-int64"><a href="#val-int64" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>int64 : int64 <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A 64 bit integer.</p></div></div><div class="spec val" id="val-float"><a href="#val-float" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>float : float <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A float.</p></div></div><div class="spec val" id="val-string"><a href="#val-string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string : string <a href="index.html#type-t">t</a></code></div><div class="doc"><p>An UTF-8 string. The database should accept UTF-8 if non-ASCII characters
are present.</p></div></div><div class="spec val" id="val-octets"><a href="#val-octets" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>octets : string <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A binary string.</p></div></div><div class="spec val" id="val-pdate"><a href="#val-pdate" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pdate : Ptime.t <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A date. This corresponds to the SQL <code class="code">date</code> type.</p></div></div><div class="spec val" id="val-ptime"><a href="#val-ptime" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ptime : Ptime.t <a href="index.html#type-t">t</a></code></div><div class="doc"><p>An absolute time with driver-dependent precision. This corresponds to an
SQL <code class="code">timestamp</code> type with UTC time zone.</p></div></div><div class="spec val" id="val-ptime_span"><a href="#val-ptime_span" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ptime_span : Ptime.span <a href="index.html#type-t">t</a></code></div><div class="doc"><p>A period of time. If the database lacks a dedicated representation, the
integer number of seconds is used.</p></div></div></details></div></body></html>