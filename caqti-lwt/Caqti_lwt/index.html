<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Caqti_lwt (caqti-lwt.Caqti_lwt)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">caqti-lwt</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Caqti_lwt</span></h1></header><p>Connecting with Lwt.</p><p>This module contains the signature and connect function specialized for use
with Lwt.</p><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../caqti/Caqti_connect_sig/index.html#module-type-S">Caqti_connect_sig.S</a><span class="keyword"> with </span><span class="keyword">type </span>'a <a href="../../caqti/Caqti_connect_sig/module-type-S/index.html#type-future">future</a> := <span class="type-var">'a</span> Lwt.t</code></span></summary><div class="spec type" id="type-future"><a href="#type-future" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a future</code><code></code><code></code></div><div class="doc"><p>The type of a deferred value of type <code class="code">'a</code>.</p></div></div><div class="spec module" id="module-Pool"><a href="#module-Pool" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Pool/index.html">Pool</a> : <a href="../../caqti/Caqti_pool_sig/index.html#module-type-S">Caqti_pool_sig.S</a><span class="keyword"> with </span><span class="keyword">type </span>'a <a href="../../caqti/Caqti_pool_sig/module-type-S/index.html#type-future">future</a> := <span class="type-var">'a</span> <a href="index.html#type-future">future</a></code></div><div class="doc"><p>A pool implementation for the current concurrency library.</p></div></div><div class="spec module-type" id="module-type-CONNECTION"><a href="#module-type-CONNECTION" class="anchor"></a><div class="def module-type"><code><span class="keyword">module type </span><a href="module-type-CONNECTION/index.html">CONNECTION</a> : <a href="../../caqti/Caqti_connection_sig/index.html#module-type-S">Caqti_connection_sig.S</a><span class="keyword"> with </span><span class="keyword">type </span>'a <a href="module-type-CONNECTION/index.html#type-future">future</a> := <span class="type-var">'a</span> <a href="index.html#type-future">future</a></code></div><div class="doc"><p>The connection API specialized for the current concurrency library.</p></div></div><div class="spec type" id="type-connection"><a href="#type-connection" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>connection</code><code><span class="keyword"> = </span>(<span class="keyword">module </span><a href="module-type-CONNECTION/index.html">CONNECTION</a>)</code><code></code></div><div class="doc"><p>Shortcut for the connection API passed as a value.</p></div></div><div class="spec val" id="val-connect"><a href="#val-connect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>connect : Uri.t <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-connection">connection</a>, [&gt; <a href="../../caqti/Caqti_error/index.html#type-load_or_connect">Caqti_error.load_or_connect</a> ]) Stdlib.result <a href="index.html#type-future">future</a></code></div><div class="doc"><p><code class="code">connect uri</code> locates and loads a driver which can handle <code class="code">uri</code>, passes
<code class="code">uri</code> to the driver, which establish a connection and returns a
first-class module implementing <a href="../../caqti/Caqti_connection_sig/module-type-S/index.html">Caqti_connection_sig.S</a>.</p></div></div><div class="spec val" id="val-connect_pool"><a href="#val-connect_pool" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>connect_pool : ?&#8288;max_size:int <span class="keyword">&#8209;&gt;</span> Uri.t <span class="keyword">&#8209;&gt;</span> ((<a href="index.html#type-connection">connection</a>, [&gt; <a href="../../caqti/Caqti_error/index.html#type-connect">Caqti_error.connect</a> ]) <a href="Pool/index.html#type-t">Pool.t</a>, [&gt; <a href="../../caqti/Caqti_error/index.html#type-load">Caqti_error.load</a> ]) Stdlib.result</code></div><div class="doc"><p><code class="code">connect_pool uri</code> is a pool of database connections constructed by
<code class="code">connect uri</code>.</p></div></div></details></div><div class="spec val" id="val-or_fail"><a href="#val-or_fail" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>or_fail : (<span class="type-var">'a</span>, [&lt; <a href="../../caqti/Caqti_error/index.html#type-t">Caqti_error.t</a> ]) Stdlib.result <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> Lwt.t</code></div><div class="doc"><p>Converts an error to an Lwt future failed with a <a href="../../caqti/Caqti_error/index.html#exception-Exn">Caqti_error.Exn</a>
exception holding the error.</p></div></div></body></html>